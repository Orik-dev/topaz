[2025-11-16 16:33:27 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-11-16 16:33:27 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-11-16 16:33:27 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2025-11-16 16:33:27 +0000] [7] [INFO] Booting worker with pid: 7
[2025-11-16 16:33:27 +0000] [8] [INFO] Booting worker with pid: 8
[2025-11-16 16:33:29 +0000] [7] [INFO] Started server process [7]
[2025-11-16 16:33:29 +0000] [7] [INFO] Waiting for application startup.
[2025-11-16 16:33:29 +0000] [8] [INFO] Started server process [8]
[2025-11-16 16:33:29 +0000] [8] [INFO] Waiting for application startup.
[2025-11-16 16:33:30 +0000] [8] [INFO] Application startup complete.
[2025-11-16 16:33:30 +0000] [7] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/web/server.py", line 83, in lifespan
    await bot.set_webhook(
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 3840, in set_webhook
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 487, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 110, in check_response
    raise TelegramRetryAfter(
aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'SetWebhook'. Retry in 1 seconds.
Original description: Too Many Requests: retry after 1
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)

[2025-11-16 16:33:30 +0000] [7] [ERROR] Application startup failed. Exiting.
[2025-11-16 16:33:30 +0000] [7] [INFO] Worker exiting (pid: 7)
[2025-11-16 16:33:30 +0000] [1] [ERROR] Worker (pid:7) exited with code 3
[2025-11-16 16:33:30 +0000] [8] [INFO] Shutting down
[2025-11-16 16:33:30 +0000] [8] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2025-11-16 16:33:31 +0000] [8] [INFO] Waiting for application shutdown.
[2025-11-16 16:33:31 +0000] [8] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/app/src/web/server.py", line 101, in lifespan
    await redis_client.aclose()
          ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Redis' object has no attribute 'aclose'

[2025-11-16 16:33:31 +0000] [8] [ERROR] Application shutdown failed. Exiting.
[2025-11-16 16:33:31 +0000] [8] [INFO] Finished server process [8]
[2025-11-16 16:33:31 +0000] [8] [INFO] Worker exiting (pid: 8)
[2025-11-16 16:33:32 +0000] [1] [ERROR] Shutting down: Master
[2025-11-16 16:33:32 +0000] [1] [ERROR] Reason: Worker failed to boot.
[2025-11-16 16:33:32 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-11-16 16:33:32 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-11-16 16:33:32 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2025-11-16 16:33:32 +0000] [7] [INFO] Booting worker with pid: 7
[2025-11-16 16:33:32 +0000] [8] [INFO] Booting worker with pid: 8
[2025-11-16 16:33:34 +0000] [7] [INFO] Started server process [7]
[2025-11-16 16:33:34 +0000] [7] [INFO] Waiting for application startup.
[2025-11-16 16:33:34 +0000] [8] [INFO] Started server process [8]
[2025-11-16 16:33:34 +0000] [8] [INFO] Waiting for application startup.
[2025-11-16 16:33:35 +0000] [7] [INFO] Application startup complete.
[2025-11-16 16:33:36 +0000] [8] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/web/server.py", line 83, in lifespan
    await bot.set_webhook(
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 3840, in set_webhook
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 487, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 110, in check_response
    raise TelegramRetryAfter(
aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'SetWebhook'. Retry in 1 seconds.
Original description: Too Many Requests: retry after 1
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)

[2025-11-16 16:33:36 +0000] [8] [ERROR] Application startup failed. Exiting.
[2025-11-16 16:33:36 +0000] [8] [INFO] Worker exiting (pid: 8)
[2025-11-16 16:33:36 +0000] [1] [ERROR] Worker (pid:8) exited with code 3
[2025-11-16 16:33:36 +0000] [7] [INFO] Shutting down
[2025-11-16 16:33:36 +0000] [7] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2025-11-16 16:33:36 +0000] [7] [INFO] Waiting for application shutdown.
[2025-11-16 16:33:36 +0000] [7] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/app/src/web/server.py", line 101, in lifespan
    await redis_client.aclose()
          ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Redis' object has no attribute 'aclose'

[2025-11-16 16:33:36 +0000] [7] [ERROR] Application shutdown failed. Exiting.
[2025-11-16 16:33:36 +0000] [7] [INFO] Finished server process [7]
[2025-11-16 16:33:36 +0000] [7] [INFO] Worker exiting (pid: 7)
[2025-11-16 16:33:37 +0000] [1] [ERROR] Shutting down: Master
[2025-11-16 16:33:37 +0000] [1] [ERROR] Reason: Worker failed to boot.
[2025-11-16 16:33:37 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-11-16 16:33:37 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-11-16 16:33:37 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2025-11-16 16:33:37 +0000] [7] [INFO] Booting worker with pid: 7
[2025-11-16 16:33:37 +0000] [8] [INFO] Booting worker with pid: 8
[2025-11-16 16:33:39 +0000] [7] [INFO] Started server process [7]
[2025-11-16 16:33:39 +0000] [7] [INFO] Waiting for application startup.
[2025-11-16 16:33:39 +0000] [8] [INFO] Started server process [8]
[2025-11-16 16:33:39 +0000] [8] [INFO] Waiting for application startup.
[2025-11-16 16:33:41 +0000] [8] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/aiohttp/connector.py", line 992, in _wrap_create_connection
    return await self._loop.create_connection(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 2088, in create_connection
  File "uvloop/loop.pyx", line 2083, in uvloop.loop.Loop.create_connection
  File "uvloop/sslproto.pyx", line 517, in uvloop.loop.SSLProtocol._on_handshake_complete
ConnectionResetError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/aiohttp.py", line 181, in make_request
    async with session.post(
  File "/usr/local/lib/python3.11/site-packages/aiohttp/client.py", line 1187, in __aenter__
    self._resp = await self._coro
                 ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiohttp/client.py", line 574, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiohttp/connector.py", line 911, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiohttp/connector.py", line 1235, in _create_direct_connection
    raise last_exc
  File "/usr/local/lib/python3.11/site-packages/aiohttp/connector.py", line 1204, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiohttp/connector.py", line 1000, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [None]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/web/server.py", line 83, in lifespan
    await bot.set_webhook(
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 3840, in set_webhook
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 487, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/aiohttp.py", line 188, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [None]

[2025-11-16 16:33:41 +0000] [8] [ERROR] Application startup failed. Exiting.
[2025-11-16 16:33:41 +0000] [8] [INFO] Worker exiting (pid: 8)
[2025-11-16 16:33:41 +0000] [7] [INFO] Application startup complete.
[2025-11-16 16:33:41 +0000] [1] [ERROR] Worker (pid:8) exited with code 3
[2025-11-16 16:33:41 +0000] [7] [INFO] Shutting down
[2025-11-16 16:33:41 +0000] [7] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2025-11-16 16:33:41 +0000] [7] [INFO] Waiting for application shutdown.
[2025-11-16 16:33:42 +0000] [7] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/app/src/web/server.py", line 101, in lifespan
    await redis_client.aclose()
          ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Redis' object has no attribute 'aclose'

[2025-11-16 16:33:42 +0000] [7] [ERROR] Application shutdown failed. Exiting.
[2025-11-16 16:33:42 +0000] [7] [INFO] Finished server process [7]
[2025-11-16 16:33:42 +0000] [7] [INFO] Worker exiting (pid: 7)
[2025-11-16 16:33:42 +0000] [1] [ERROR] Shutting down: Master
[2025-11-16 16:33:42 +0000] [1] [ERROR] Reason: Worker failed to boot.
[2025-11-16 16:33:43 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-11-16 16:33:43 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-11-16 16:33:43 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2025-11-16 16:33:43 +0000] [6] [INFO] Booting worker with pid: 6
[2025-11-16 16:33:43 +0000] [7] [INFO] Booting worker with pid: 7
[2025-11-16 16:33:44 +0000] [7] [INFO] Started server process [7]
[2025-11-16 16:33:44 +0000] [7] [INFO] Waiting for application startup.
[2025-11-16 16:33:44 +0000] [6] [INFO] Started server process [6]
[2025-11-16 16:33:44 +0000] [6] [INFO] Waiting for application startup.
[2025-11-16 16:33:46 +0000] [6] [INFO] Application startup complete.
[2025-11-16 16:33:46 +0000] [7] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/web/server.py", line 83, in lifespan
    await bot.set_webhook(
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 3840, in set_webhook
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 487, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 110, in check_response
    raise TelegramRetryAfter(
aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'SetWebhook'. Retry in 1 seconds.
Original description: Too Many Requests: retry after 1
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)

[2025-11-16 16:33:46 +0000] [7] [ERROR] Application startup failed. Exiting.
[2025-11-16 16:33:46 +0000] [7] [INFO] Worker exiting (pid: 7)
[2025-11-16 16:33:46 +0000] [1] [ERROR] Worker (pid:7) exited with code 3
[2025-11-16 16:33:46 +0000] [6] [INFO] Shutting down
[2025-11-16 16:33:46 +0000] [6] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2025-11-16 16:33:46 +0000] [6] [INFO] Waiting for application shutdown.
[2025-11-16 16:33:47 +0000] [6] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/app/src/web/server.py", line 101, in lifespan
    await redis_client.aclose()
          ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Redis' object has no attribute 'aclose'

[2025-11-16 16:33:47 +0000] [6] [ERROR] Application shutdown failed. Exiting.
[2025-11-16 16:33:47 +0000] [6] [INFO] Finished server process [6]
[2025-11-16 16:33:47 +0000] [6] [INFO] Worker exiting (pid: 6)
[2025-11-16 16:33:47 +0000] [1] [ERROR] Shutting down: Master
[2025-11-16 16:33:47 +0000] [1] [ERROR] Reason: Worker failed to boot.
[2025-11-16 16:35:06 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-11-16 16:35:06 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-11-16 16:35:06 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2025-11-16 16:35:06 +0000] [6] [INFO] Booting worker with pid: 6
[2025-11-16 16:35:06 +0000] [7] [INFO] Booting worker with pid: 7
[2025-11-16 16:35:08 +0000] [6] [INFO] Started server process [6]
[2025-11-16 16:35:08 +0000] [7] [INFO] Started server process [7]
[2025-11-16 16:35:08 +0000] [6] [INFO] Waiting for application startup.
[2025-11-16 16:35:08 +0000] [7] [INFO] Waiting for application startup.
[2025-11-16 16:35:09 +0000] [7] [INFO] Application startup complete.
[2025-11-16 16:35:09 +0000] [6] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/web/server.py", line 83, in lifespan
    await bot.set_webhook(
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 3840, in set_webhook
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 487, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 110, in check_response
    raise TelegramRetryAfter(
aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'SetWebhook'. Retry in 1 seconds.
Original description: Too Many Requests: retry after 1
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)

[2025-11-16 16:35:09 +0000] [6] [ERROR] Application startup failed. Exiting.
[2025-11-16 16:35:09 +0000] [6] [INFO] Worker exiting (pid: 6)
[2025-11-16 16:35:09 +0000] [1] [ERROR] Worker (pid:6) exited with code 3
[2025-11-16 16:35:09 +0000] [7] [INFO] Shutting down
[2025-11-16 16:35:09 +0000] [7] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2025-11-16 16:35:09 +0000] [7] [INFO] Waiting for application shutdown.
[2025-11-16 16:35:10 +0000] [7] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/app/src/web/server.py", line 101, in lifespan
    await redis_client.aclose()
          ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Redis' object has no attribute 'aclose'

[2025-11-16 16:35:10 +0000] [7] [ERROR] Application shutdown failed. Exiting.
[2025-11-16 16:35:10 +0000] [7] [INFO] Finished server process [7]
[2025-11-16 16:35:10 +0000] [7] [INFO] Worker exiting (pid: 7)
[2025-11-16 16:35:10 +0000] [1] [ERROR] Shutting down: Master
[2025-11-16 16:35:10 +0000] [1] [ERROR] Reason: Worker failed to boot.
[2025-11-16 16:35:11 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-11-16 16:35:11 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-11-16 16:35:11 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2025-11-16 16:35:11 +0000] [7] [INFO] Booting worker with pid: 7
[2025-11-16 16:35:11 +0000] [8] [INFO] Booting worker with pid: 8
[2025-11-16 16:35:12 +0000] [8] [INFO] Started server process [8]
[2025-11-16 16:35:12 +0000] [8] [INFO] Waiting for application startup.
[2025-11-16 16:35:12 +0000] [7] [INFO] Started server process [7]
[2025-11-16 16:35:12 +0000] [7] [INFO] Waiting for application startup.
[2025-11-16 16:35:13 +0000] [8] [INFO] Application startup complete.
[2025-11-16 16:35:13 +0000] [7] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/web/server.py", line 83, in lifespan
    await bot.set_webhook(
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 3840, in set_webhook
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 487, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 110, in check_response
    raise TelegramRetryAfter(
aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'SetWebhook'. Retry in 1 seconds.
Original description: Too Many Requests: retry after 1
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)

[2025-11-16 16:35:13 +0000] [7] [ERROR] Application startup failed. Exiting.
[2025-11-16 16:35:13 +0000] [7] [INFO] Worker exiting (pid: 7)
[2025-11-16 16:35:14 +0000] [1] [ERROR] Worker (pid:7) exited with code 3
[2025-11-16 16:35:14 +0000] [8] [INFO] Shutting down
[2025-11-16 16:35:14 +0000] [8] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2025-11-16 16:35:14 +0000] [8] [INFO] Waiting for application shutdown.
[2025-11-16 16:35:15 +0000] [8] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/app/src/web/server.py", line 101, in lifespan
    await redis_client.aclose()
          ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Redis' object has no attribute 'aclose'

[2025-11-16 16:35:15 +0000] [8] [ERROR] Application shutdown failed. Exiting.
[2025-11-16 16:35:15 +0000] [8] [INFO] Finished server process [8]
[2025-11-16 16:35:15 +0000] [8] [INFO] Worker exiting (pid: 8)
[2025-11-16 16:35:15 +0000] [1] [ERROR] Shutting down: Master
[2025-11-16 16:35:15 +0000] [1] [ERROR] Reason: Worker failed to boot.
[2025-11-16 16:35:16 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-11-16 16:35:16 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-11-16 16:35:16 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2025-11-16 16:35:16 +0000] [7] [INFO] Booting worker with pid: 7
[2025-11-16 16:35:16 +0000] [8] [INFO] Booting worker with pid: 8
[2025-11-16 16:35:18 +0000] [8] [INFO] Started server process [8]
[2025-11-16 16:35:18 +0000] [7] [INFO] Started server process [7]
[2025-11-16 16:35:18 +0000] [8] [INFO] Waiting for application startup.
[2025-11-16 16:35:18 +0000] [7] [INFO] Waiting for application startup.
[2025-11-16 16:35:19 +0000] [7] [INFO] Application startup complete.
[2025-11-16 16:35:19 +0000] [8] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/web/server.py", line 83, in lifespan
    await bot.set_webhook(
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 3840, in set_webhook
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 487, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 110, in check_response
    raise TelegramRetryAfter(
aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'SetWebhook'. Retry in 1 seconds.
Original description: Too Many Requests: retry after 1
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)

[2025-11-16 16:35:19 +0000] [8] [ERROR] Application startup failed. Exiting.
[2025-11-16 16:35:19 +0000] [8] [INFO] Worker exiting (pid: 8)
[2025-11-16 16:35:19 +0000] [1] [ERROR] Worker (pid:8) exited with code 3
[2025-11-16 16:35:19 +0000] [7] [INFO] Shutting down
[2025-11-16 16:35:19 +0000] [7] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2025-11-16 16:35:19 +0000] [7] [INFO] Waiting for application shutdown.
[2025-11-16 16:35:20 +0000] [7] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/app/src/web/server.py", line 101, in lifespan
    await redis_client.aclose()
          ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Redis' object has no attribute 'aclose'

[2025-11-16 16:35:20 +0000] [7] [ERROR] Application shutdown failed. Exiting.
[2025-11-16 16:35:20 +0000] [7] [INFO] Finished server process [7]
[2025-11-16 16:35:20 +0000] [7] [INFO] Worker exiting (pid: 7)
[2025-11-16 16:35:20 +0000] [1] [ERROR] Shutting down: Master
[2025-11-16 16:35:20 +0000] [1] [ERROR] Reason: Worker failed to boot.
[2025-11-16 16:35:21 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-11-16 16:35:21 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-11-16 16:35:21 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2025-11-16 16:35:21 +0000] [7] [INFO] Booting worker with pid: 7
[2025-11-16 16:35:21 +0000] [8] [INFO] Booting worker with pid: 8
[2025-11-16 16:35:23 +0000] [7] [INFO] Started server process [7]
[2025-11-16 16:35:23 +0000] [7] [INFO] Waiting for application startup.
[2025-11-16 16:35:23 +0000] [8] [INFO] Started server process [8]
[2025-11-16 16:35:23 +0000] [8] [INFO] Waiting for application startup.
[2025-11-16 16:35:24 +0000] [7] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/web/server.py", line 83, in lifespan
    await bot.set_webhook(
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 3840, in set_webhook
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 487, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 110, in check_response
    raise TelegramRetryAfter(
aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'SetWebhook'. Retry in 1 seconds.
Original description: Too Many Requests: retry after 1
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)

[2025-11-16 16:35:24 +0000] [7] [ERROR] Application startup failed. Exiting.
[2025-11-16 16:35:24 +0000] [7] [INFO] Worker exiting (pid: 7)
[2025-11-16 16:35:24 +0000] [8] [INFO] Application startup complete.
[2025-11-16 16:35:24 +0000] [1] [ERROR] Worker (pid:7) exited with code 3
[2025-11-16 16:35:24 +0000] [8] [INFO] Shutting down
[2025-11-16 16:35:24 +0000] [8] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2025-11-16 16:35:24 +0000] [8] [INFO] Waiting for application shutdown.
[2025-11-16 16:35:25 +0000] [8] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/app/src/web/server.py", line 101, in lifespan
    await redis_client.aclose()
          ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Redis' object has no attribute 'aclose'

[2025-11-16 16:35:25 +0000] [8] [ERROR] Application shutdown failed. Exiting.
[2025-11-16 16:35:25 +0000] [8] [INFO] Finished server process [8]
[2025-11-16 16:35:25 +0000] [8] [INFO] Worker exiting (pid: 8)
[2025-11-16 16:35:26 +0000] [1] [ERROR] Shutting down: Master
[2025-11-16 16:35:26 +0000] [1] [ERROR] Reason: Worker failed to boot.
[2025-11-16 16:35:27 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-11-16 16:35:27 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-11-16 16:35:27 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2025-11-16 16:35:27 +0000] [7] [INFO] Booting worker with pid: 7
[2025-11-16 16:35:27 +0000] [8] [INFO] Booting worker with pid: 8
[2025-11-16 16:35:29 +0000] [7] [INFO] Started server process [7]
[2025-11-16 16:35:29 +0000] [7] [INFO] Waiting for application startup.
[2025-11-16 16:35:29 +0000] [8] [INFO] Started server process [8]
[2025-11-16 16:35:29 +0000] [8] [INFO] Waiting for application startup.
[2025-11-16 16:35:29 +0000] [7] [INFO] Application startup complete.
[2025-11-16 16:35:30 +0000] [8] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/web/server.py", line 83, in lifespan
    await bot.set_webhook(
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 3840, in set_webhook
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 487, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 110, in check_response
    raise TelegramRetryAfter(
aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'SetWebhook'. Retry in 1 seconds.
Original description: Too Many Requests: retry after 1
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)

[2025-11-16 16:35:30 +0000] [8] [ERROR] Application startup failed. Exiting.
[2025-11-16 16:35:30 +0000] [8] [INFO] Worker exiting (pid: 8)
[2025-11-16 16:35:30 +0000] [1] [ERROR] Worker (pid:8) exited with code 3
[2025-11-16 16:35:30 +0000] [7] [INFO] Shutting down
[2025-11-16 16:35:30 +0000] [7] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2025-11-16 16:35:31 +0000] [7] [INFO] Waiting for application shutdown.
[2025-11-16 16:35:31 +0000] [7] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/app/src/web/server.py", line 101, in lifespan
    await redis_client.aclose()
          ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Redis' object has no attribute 'aclose'

[2025-11-16 16:35:31 +0000] [7] [ERROR] Application shutdown failed. Exiting.
[2025-11-16 16:35:31 +0000] [7] [INFO] Finished server process [7]
[2025-11-16 16:35:31 +0000] [7] [INFO] Worker exiting (pid: 7)
[2025-11-16 16:35:32 +0000] [1] [ERROR] Shutting down: Master
[2025-11-16 16:35:32 +0000] [1] [ERROR] Reason: Worker failed to boot.
[2025-11-16 16:35:34 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-11-16 16:35:34 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-11-16 16:35:34 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2025-11-16 16:35:34 +0000] [7] [INFO] Booting worker with pid: 7
[2025-11-16 16:35:34 +0000] [8] [INFO] Booting worker with pid: 8
[2025-11-16 16:35:36 +0000] [7] [INFO] Started server process [7]
[2025-11-16 16:35:36 +0000] [7] [INFO] Waiting for application startup.
[2025-11-16 16:35:37 +0000] [8] [INFO] Started server process [8]
[2025-11-16 16:35:37 +0000] [8] [INFO] Waiting for application startup.
[2025-11-16 16:35:37 +0000] [8] [INFO] Application startup complete.
[2025-11-16 16:35:37 +0000] [7] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/web/server.py", line 83, in lifespan
    await bot.set_webhook(
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 3840, in set_webhook
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 487, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 110, in check_response
    raise TelegramRetryAfter(
aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'SetWebhook'. Retry in 1 seconds.
Original description: Too Many Requests: retry after 1
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)

[2025-11-16 16:35:37 +0000] [7] [ERROR] Application startup failed. Exiting.
[2025-11-16 16:35:37 +0000] [7] [INFO] Worker exiting (pid: 7)
[2025-11-16 16:35:38 +0000] [1] [ERROR] Worker (pid:7) exited with code 3
[2025-11-16 16:35:38 +0000] [8] [INFO] Shutting down
[2025-11-16 16:35:38 +0000] [8] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2025-11-16 16:35:38 +0000] [8] [INFO] Waiting for application shutdown.
[2025-11-16 16:35:39 +0000] [8] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/app/src/web/server.py", line 101, in lifespan
    await redis_client.aclose()
          ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Redis' object has no attribute 'aclose'

[2025-11-16 16:35:39 +0000] [8] [ERROR] Application shutdown failed. Exiting.
[2025-11-16 16:35:39 +0000] [8] [INFO] Finished server process [8]
[2025-11-16 16:35:39 +0000] [8] [INFO] Worker exiting (pid: 8)
[2025-11-16 16:35:39 +0000] [1] [ERROR] Shutting down: Master
[2025-11-16 16:35:39 +0000] [1] [ERROR] Reason: Worker failed to boot.
[2025-11-16 16:35:43 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-11-16 16:35:43 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-11-16 16:35:43 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2025-11-16 16:35:43 +0000] [7] [INFO] Booting worker with pid: 7
[2025-11-16 16:35:43 +0000] [8] [INFO] Booting worker with pid: 8
[2025-11-16 16:35:46 +0000] [7] [INFO] Started server process [7]
[2025-11-16 16:35:46 +0000] [8] [INFO] Started server process [8]
[2025-11-16 16:35:46 +0000] [7] [INFO] Waiting for application startup.
[2025-11-16 16:35:46 +0000] [8] [INFO] Waiting for application startup.
[2025-11-16 16:35:47 +0000] [8] [INFO] Application startup complete.
[2025-11-16 16:35:47 +0000] [7] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/web/server.py", line 83, in lifespan
    await bot.set_webhook(
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 3840, in set_webhook
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 487, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 110, in check_response
    raise TelegramRetryAfter(
aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'SetWebhook'. Retry in 1 seconds.
Original description: Too Many Requests: retry after 1
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)

[2025-11-16 16:35:47 +0000] [7] [ERROR] Application startup failed. Exiting.
[2025-11-16 16:35:47 +0000] [7] [INFO] Worker exiting (pid: 7)
[2025-11-16 16:35:48 +0000] [1] [ERROR] Worker (pid:7) exited with code 3
[2025-11-16 16:35:48 +0000] [8] [INFO] Shutting down
[2025-11-16 16:35:48 +0000] [8] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2025-11-16 16:35:48 +0000] [8] [INFO] Waiting for application shutdown.
[2025-11-16 16:35:49 +0000] [8] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/app/src/web/server.py", line 101, in lifespan
    await redis_client.aclose()
          ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Redis' object has no attribute 'aclose'

[2025-11-16 16:35:49 +0000] [8] [ERROR] Application shutdown failed. Exiting.
[2025-11-16 16:35:49 +0000] [8] [INFO] Finished server process [8]
[2025-11-16 16:35:49 +0000] [8] [INFO] Worker exiting (pid: 8)
[2025-11-16 16:35:49 +0000] [1] [ERROR] Shutting down: Master
[2025-11-16 16:35:49 +0000] [1] [ERROR] Reason: Worker failed to boot.
[2025-11-16 16:35:56 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-11-16 16:35:56 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-11-16 16:35:56 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2025-11-16 16:35:56 +0000] [7] [INFO] Booting worker with pid: 7
[2025-11-16 16:35:56 +0000] [8] [INFO] Booting worker with pid: 8
[2025-11-16 16:35:58 +0000] [8] [INFO] Started server process [8]
[2025-11-16 16:35:58 +0000] [7] [INFO] Started server process [7]
[2025-11-16 16:35:58 +0000] [8] [INFO] Waiting for application startup.
[2025-11-16 16:35:58 +0000] [7] [INFO] Waiting for application startup.
[2025-11-16 16:35:59 +0000] [8] [INFO] Application startup complete.
[2025-11-16 16:35:59 +0000] [7] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/web/server.py", line 83, in lifespan
    await bot.set_webhook(
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 3840, in set_webhook
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 487, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 110, in check_response
    raise TelegramRetryAfter(
aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'SetWebhook'. Retry in 1 seconds.
Original description: Too Many Requests: retry after 1
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)

[2025-11-16 16:35:59 +0000] [7] [ERROR] Application startup failed. Exiting.
[2025-11-16 16:35:59 +0000] [7] [INFO] Worker exiting (pid: 7)
[2025-11-16 16:36:00 +0000] [1] [ERROR] Worker (pid:7) exited with code 3
[2025-11-16 16:36:00 +0000] [8] [INFO] Shutting down
[2025-11-16 16:36:00 +0000] [8] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2025-11-16 16:36:00 +0000] [8] [INFO] Waiting for application shutdown.
[2025-11-16 16:36:01 +0000] [8] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/app/src/web/server.py", line 101, in lifespan
    await redis_client.aclose()
          ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Redis' object has no attribute 'aclose'

[2025-11-16 16:36:01 +0000] [8] [ERROR] Application shutdown failed. Exiting.
[2025-11-16 16:36:01 +0000] [8] [INFO] Finished server process [8]
[2025-11-16 16:36:01 +0000] [8] [INFO] Worker exiting (pid: 8)
[2025-11-16 16:36:01 +0000] [1] [ERROR] Shutting down: Master
[2025-11-16 16:36:01 +0000] [1] [ERROR] Reason: Worker failed to boot.
[2025-11-16 16:36:15 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-11-16 16:36:15 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-11-16 16:36:15 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2025-11-16 16:36:15 +0000] [7] [INFO] Booting worker with pid: 7
[2025-11-16 16:36:15 +0000] [8] [INFO] Booting worker with pid: 8
[2025-11-16 16:36:17 +0000] [7] [INFO] Started server process [7]
[2025-11-16 16:36:17 +0000] [7] [INFO] Waiting for application startup.
[2025-11-16 16:36:17 +0000] [8] [INFO] Started server process [8]
[2025-11-16 16:36:17 +0000] [8] [INFO] Waiting for application startup.
[2025-11-16 16:36:17 +0000] [7] [INFO] Application startup complete.
[2025-11-16 16:36:18 +0000] [8] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/web/server.py", line 83, in lifespan
    await bot.set_webhook(
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 3840, in set_webhook
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 487, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 110, in check_response
    raise TelegramRetryAfter(
aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'SetWebhook'. Retry in 1 seconds.
Original description: Too Many Requests: retry after 1
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)

[2025-11-16 16:36:18 +0000] [8] [ERROR] Application startup failed. Exiting.
[2025-11-16 16:36:18 +0000] [8] [INFO] Worker exiting (pid: 8)
[2025-11-16 16:36:18 +0000] [1] [ERROR] Worker (pid:8) exited with code 3
[2025-11-16 16:36:18 +0000] [7] [INFO] Shutting down
[2025-11-16 16:36:18 +0000] [7] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2025-11-16 16:36:18 +0000] [7] [INFO] Waiting for application shutdown.
[2025-11-16 16:36:19 +0000] [7] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/app/src/web/server.py", line 101, in lifespan
    await redis_client.aclose()
          ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Redis' object has no attribute 'aclose'

[2025-11-16 16:36:19 +0000] [7] [ERROR] Application shutdown failed. Exiting.
[2025-11-16 16:36:19 +0000] [7] [INFO] Finished server process [7]
[2025-11-16 16:36:19 +0000] [7] [INFO] Worker exiting (pid: 7)
[2025-11-16 16:36:19 +0000] [1] [ERROR] Shutting down: Master
[2025-11-16 16:36:19 +0000] [1] [ERROR] Reason: Worker failed to boot.
[2025-11-16 16:36:45 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-11-16 16:36:45 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-11-16 16:36:45 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2025-11-16 16:36:45 +0000] [7] [INFO] Booting worker with pid: 7
[2025-11-16 16:36:45 +0000] [8] [INFO] Booting worker with pid: 8
[2025-11-16 16:36:47 +0000] [8] [INFO] Started server process [8]
[2025-11-16 16:36:47 +0000] [8] [INFO] Waiting for application startup.
[2025-11-16 16:36:47 +0000] [7] [INFO] Started server process [7]
[2025-11-16 16:36:47 +0000] [7] [INFO] Waiting for application startup.
[2025-11-16 16:36:48 +0000] [8] [INFO] Application startup complete.
[2025-11-16 16:36:48 +0000] [7] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/web/server.py", line 76, in lifespan
    await bot.set_webhook(
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 3840, in set_webhook
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 487, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 110, in check_response
    raise TelegramRetryAfter(
aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'SetWebhook'. Retry in 1 seconds.
Original description: Too Many Requests: retry after 1
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)

[2025-11-16 16:36:48 +0000] [7] [ERROR] Application startup failed. Exiting.
[2025-11-16 16:36:48 +0000] [7] [INFO] Worker exiting (pid: 7)
[2025-11-16 16:36:48 +0000] [1] [ERROR] Worker (pid:7) exited with code 3
[2025-11-16 16:36:48 +0000] [8] [INFO] Shutting down
[2025-11-16 16:36:48 +0000] [8] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2025-11-16 16:36:48 +0000] [8] [INFO] Waiting for application shutdown.
[2025-11-16 16:36:49 +0000] [8] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/app/src/web/server.py", line 94, in lifespan
    await redis_client.aclose()  #  Redis
          ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Redis' object has no attribute 'aclose'

[2025-11-16 16:36:49 +0000] [8] [ERROR] Application shutdown failed. Exiting.
[2025-11-16 16:36:49 +0000] [8] [INFO] Finished server process [8]
[2025-11-16 16:36:49 +0000] [8] [INFO] Worker exiting (pid: 8)
[2025-11-16 16:36:49 +0000] [1] [ERROR] Shutting down: Master
[2025-11-16 16:36:49 +0000] [1] [ERROR] Reason: Worker failed to boot.
[2025-11-16 16:37:42 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-11-16 16:37:42 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-11-16 16:37:42 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2025-11-16 16:37:42 +0000] [7] [INFO] Booting worker with pid: 7
[2025-11-16 16:37:42 +0000] [8] [INFO] Booting worker with pid: 8
[2025-11-16 16:37:44 +0000] [7] [INFO] Started server process [7]
[2025-11-16 16:37:44 +0000] [7] [INFO] Waiting for application startup.
[2025-11-16 16:37:44 +0000] [8] [INFO] Started server process [8]
[2025-11-16 16:37:44 +0000] [8] [INFO] Waiting for application startup.
[2025-11-16 16:37:45 +0000] [8] [INFO] Application startup complete.
[2025-11-16 16:37:45 +0000] [7] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/web/server.py", line 76, in lifespan
    await bot.set_webhook(
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 3840, in set_webhook
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/bot.py", line 487, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/aiogram/client/session/base.py", line 110, in check_response
    raise TelegramRetryAfter(
aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'SetWebhook'. Retry in 1 seconds.
Original description: Too Many Requests: retry after 1
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)

[2025-11-16 16:37:45 +0000] [7] [ERROR] Application startup failed. Exiting.
[2025-11-16 16:37:45 +0000] [7] [INFO] Worker exiting (pid: 7)
[2025-11-16 16:37:45 +0000] [1] [ERROR] Worker (pid:7) exited with code 3
[2025-11-16 16:37:46 +0000] [8] [INFO] Shutting down
[2025-11-16 16:37:46 +0000] [8] [INFO] Error while closing socket [Errno 9] Bad file descriptor
[2025-11-16 16:37:46 +0000] [8] [INFO] Waiting for application shutdown.
[2025-11-16 16:37:46 +0000] [8] [ERROR] Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 738, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/app/src/web/server.py", line 94, in lifespan
    await redis_client.aclose()  #  Redis
          ^^^^^^^^^^^^^^^^^^^
AttributeError: 'Redis' object has no attribute 'aclose'

[2025-11-16 16:37:46 +0000] [8] [ERROR] Application shutdown failed. Exiting.
[2025-11-16 16:37:46 +0000] [8] [INFO] Finished server process [8]
[2025-11-16 16:37:46 +0000] [8] [INFO] Worker exiting (pid: 8)
[2025-11-16 16:37:47 +0000] [1] [ERROR] Shutting down: Master
[2025-11-16 16:37:47 +0000] [1] [ERROR] Reason: Worker failed to boot.
